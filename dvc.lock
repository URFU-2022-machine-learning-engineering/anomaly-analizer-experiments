schema: '2.0'
stages:
  prepare_data:
    cmd: python scripts/prepare_data.py
    deps:
    - path: data/enriched_spans.csv
      hash: md5
      md5: abc024511575cf06671faf4f5cf135d1
      size: 255046768
    outs:
    - path: data/data_with_anomalies.csv
      hash: md5
      md5: 62a00c8c38bea585b3f74c386fd802ed
      size: 147899351
    - path: data/prepared_data.csv
      hash: md5
      md5: 9334e0ee00dce092a7253c02b99d3ef6
      size: 151853561
  train_model:
    cmd: python scripts/train_model.py
    deps:
    - path: data/prepared_data.csv
      hash: md5
      md5: 9334e0ee00dce092a7253c02b99d3ef6
      size: 151853561
    params:
      params.yaml:
        model_params.max_depth: 1
        model_params.n_estimators: 100
        model_params.n_jobs: -1
        model_params.random_state: 42
    outs:
    - path: model/rf_model.pkl
      hash: md5
      md5: 15d6d27fe776d295a7d1ee8f6b7b3e4a
      size: 55686
  evaluate_model:
    cmd: python scripts/evaluate_model.py
    deps:
    - path: data/prepared_data.csv
      hash: md5
      md5: 9334e0ee00dce092a7253c02b99d3ef6
      size: 151853561
    - path: model/rf_model.pkl
      hash: md5
      md5: 15d6d27fe776d295a7d1ee8f6b7b3e4a
      size: 55686
    outs:
    - path: metrics/accuracy.json
      hash: md5
      md5: 0deda611587f2d0f8549a710072f59f2
      size: 32
    - path: metrics/classification_report.json
      hash: md5
      md5: 8d88be0c745be6ea656465988552b730
      size: 511
    - path: metrics/confusion_matrix.csv
      hash: md5
      md5: abb138415d1cd9c6a4ca98c235792330
      size: 70
    - path: metrics/feature_importances.csv
      hash: md5
      md5: a3e36ff13f79f1ef5d1c574918ff488d
      size: 584
