schema: '2.0'
stages:
  prepare_data:
    cmd: python scripts/prepare_data.py
    deps:
    - path: data/enriched_spans.csv
      hash: md5
      md5: b0a9631035c56d594ea7b55589d7c14b
      size: 301464220
    outs:
    - path: data/data_with_anomalies.csv
      hash: md5
      md5: 5ee48d90f1c08d0ed78b7e4da67e3e86
      size: 181226884
    - path: data/prepared_data.csv
      hash: md5
      md5: 35eb66f2b03b21521e86c325e67daa1f
      size: 186018755
  train_model:
    cmd: python scripts/train_model.py
    deps:
    - path: data/prepared_data.csv
      hash: md5
      md5: 35eb66f2b03b21521e86c325e67daa1f
      size: 186018755
    params:
      params.yaml:
        model_params.max_depth: 1
        model_params.n_estimators: 100
        model_params.n_jobs: -1
        model_params.random_state: 42
    outs:
    - path: model/rf_model.pkl
      hash: md5
      md5: 33b91d8d12aa6939bc5e7397b7ccc3f7
      size: 55686
  evaluate_model:
    cmd: python scripts/evaluate_model.py
    deps:
    - path: data/prepared_data.csv
      hash: md5
      md5: 35eb66f2b03b21521e86c325e67daa1f
      size: 186018755
    - path: model/rf_model.pkl
      hash: md5
      md5: 33b91d8d12aa6939bc5e7397b7ccc3f7
      size: 55686
    outs:
    - path: metrics/accuracy.json
      hash: md5
      md5: 97c25c9848e354cc80e16adc611f326e
      size: 32
    - path: metrics/classification_report.json
      hash: md5
      md5: 5caea507526566fbc3e8149317d0e14a
      size: 510
    - path: metrics/confusion_matrix.csv
      hash: md5
      md5: 3fc1e4e853275220e4dde65502e9688a
      size: 70
    - path: metrics/feature_importances.csv
      hash: md5
      md5: e224a7f1f52d5be9e7fa81634f12538f
      size: 416
  load_data:
    cmd: bash scripts/load_data.sh
    outs:
    - path: data/enriched_spans.csv
      hash: md5
      md5: b0a9631035c56d594ea7b55589d7c14b
      size: 301464220
